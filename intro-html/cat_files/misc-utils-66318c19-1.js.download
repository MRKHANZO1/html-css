import{_ as c}from"./preload-helper-be1680a6-1.js";import{r as d}from"./stimulus-helpers-c43cc3fa-1.js";import"./index-af68f786-1.js";import{E as S}from"./ez-base-controller-b85d3e67-1.js";import{G as a}from"./ez-custom-events-cfc2257b-1.js";import{M as u}from"./media-matcher-b9d0b27a-1.js";import"./performance-helpers-20b701c9-1.js";import"./_commonjsHelpers-de833af9-1.js";function h(n){let e;return(...t)=>{e&&cancelAnimationFrame(e),e=requestAnimationFrame(()=>{n(...t)})}}const l=new u;class r extends S{constructor(){super(...arguments),this.lastScrolledPosition=window.scrollY,this.isScrolled=!1,this.setupSticky=()=>{this.setupStickyMediaQueries(),this.initialState(),window.addEventListener("scroll",this.normalScrollCheck)},this.initialState=()=>{this.stickElement(),this.showElement(),this.isCloseToTop()&&this.hideStickyHeaderSearchBar(),window.addEventListener("scroll",this.dynamicScrollCheck)},this.disableDynamicSticky=()=>{this.stickElement(),this.showElement(),window.removeEventListener("scroll",this.dynamicScrollCheck)},this.isScrollingUp=()=>this.lastScrolledPosition>window.scrollY,this.isScrolledToTop=()=>window.scrollY<=0,this.isCloseToTop=(e=!1)=>{const t=this.element,s=e?50:0;return window.scrollY<=t.offsetHeight+s},this.hasScrolledPastLastStickyElement=()=>{const e=document.querySelectorAll('[data-controller*="dynamic-sticky"]'),s=Array.from(e).reduce((i,o)=>{const m=i.offsetTop+i.offsetHeight;return o.offsetTop+o.offsetHeight>m?o:i});return window.scrollY>s.clientHeight},this.showElement=()=>{this.element.classList.contains(this.isStickyClass)&&requestAnimationFrame(()=>{this.element.classList.remove(this.hideElementClass),this.element.classList.add(this.showElementClass),this.showStickyHeaderSearchBar(),this.applyStickyOffset()})},this.hideElement=()=>{requestAnimationFrame(()=>{this.element.classList.remove(this.showElementClass),this.element.classList.add(this.hideElementClass),this.removeStickyOffset()})},this.unstickElement=()=>{requestAnimationFrame(()=>{this.element.classList.remove(this.showElementClass),this.element.classList.remove(this.isStickyClass)})},this.stickElement=()=>{this.element.classList.add(this.isStickyClass)},this.showStickyHeaderSearchBar=(e=!1)=>{this.mainSearchBar&&(!this.isCloseToTop(!0)||e)&&requestAnimationFrame(()=>{this.mainSearchBar.classList.add("is-visible"),requestAnimationFrame(()=>{this.searchField.disabled=!1})})},this.applyStickyOffset=()=>{if(!this.hasOffsetElementSelectorValue)return;const e=document.querySelector(this.offsetElementSelectorValue),t=this.element;requestAnimationFrame(()=>{t.style.top=`${e.offsetHeight}px`})},this.removeStickyOffset=()=>{requestAnimationFrame(()=>{this.element.style.top="0"})},this.applyStickyHeader=()=>{this.isScrollingUp()?this.scrollingUpActions():this.scrollingDownActions(),this.lastScrolledPosition=window.scrollY},this.scrollingUpActions=()=>{this.showElement(),this.isScrolledToTop()&&this.unstickElement(),this.isCloseToTop()&&this.hideStickyHeaderSearchBar()},this.scrollingDownActions=()=>{this.hasScrolledPastLastStickyElement()&&(this.stickElement(),this.hideElement())},this.checkScroll=()=>{window.scrollY>this.scrollOffsetValue&&this.isScrolled===!1?(requestAnimationFrame(()=>{document.body.classList.add("is-scrolled")}),this.isScrolled=!0):window.scrollY<=0&&this.isScrolled===!0&&(requestAnimationFrame(()=>{document.body.classList.remove("is-scrolled")}),this.isScrolled=!1)},this.normalScrollCheck=h(this.checkScroll),this.dynamicScrollCheck=h(()=>{this.applyStickyHeader()})}connect(){this.waitToGetSticky()?window.addEventListener(a,this.setupSticky):this.setupSticky(),window.addEventListener("resize",this.applyStickyOffset)}disconnect(){window.removeEventListener(a,this.setupSticky),window.removeEventListener("resize",this.applyStickyOffset),window.removeEventListener("scroll",this.normalScrollCheck),window.removeEventListener("scroll",this.dynamicScrollCheck)}setupStickyMediaQueries(){l.addMediaQuery("(max-width: 635px)",()=>this.showStickyHeaderSearchBar(!0),this.initialState),l.evaluateAll(),l.addListeners()}hideStickyHeaderSearchBar(){!this.mobileSearchButtonVisible()&&document.body.classList.contains("main-search-soft-hidden")&&this.mainSearchBar&&requestAnimationFrame(()=>{this.mainSearchBar.classList.remove("is-visible"),requestAnimationFrame(()=>{this.searchField.disabled=!0})})}mobileSearchButtonVisible(){const e=document.querySelector('[data-action*="click->site-header#toggleMobileSearch"]');return e?getComputedStyle(e).display!=="none":!1}waitToGetSticky(){return window.waitToGetSticky||this.waitToInitValue}get mainSearchBar(){return document.querySelector(".ez-site-header__search-fullwidth")}get searchField(){return this.mainSearchBar.querySelector(".ez-search-form__input")}}r.classes=["isSticky","showElement","hideElement"];r.values={mobileOnly:{type:Number,default:0},waitToInit:{type:Boolean,default:!1},offsetElementSelector:String,scrollOffset:{type:Number,default:0}};d([["dynamic-sticky",r],["scroll-top",c(()=>import("./scroll-top-controller-a433ce44-1.js"),[])],["success-modal",c(()=>import("./success-modal-controller-c2308302-1.js"),[])]]);
