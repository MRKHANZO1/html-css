import{r as l}from"./stimulus-helpers-c43cc3fa-1.js";import{E as t}from"./ez-base-controller-b85d3e67-1.js";import{e as i}from"./events-8df5dda9-1.js";import{t as a}from"./helpers-b048f46c-1.js";import c from"./ez-form-select-field-controller-30502784-1.js";import{E as m}from"./modal-controller-2246d043-1.js";import"./performance-helpers-20b701c9-1.js";import"./js-5386754e-1.js";import"./_commonjsHelpers-de833af9-1.js";import"./init-user-58d04eb1-1.js";import"./ez-custom-events-cfc2257b-1.js";import"./rails-ujs-e70e4d86-1.js";class d extends t{preventButtonDefault(e){e.preventDefault()}delayedSpinner(){setTimeout(()=>{requestAnimationFrame(()=>{this.element.classList.add("is-loading")})},0)}}class r extends t{constructor(){super(...arguments),this.blurSubMenu=e=>{this.element.contains(e.target)||this.closeDropDown()},this.openDropDown=()=>{window.addEventListener("keyup",this.allowEscClose),window.addEventListener("click",this.blurSubMenu),this.addLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.remove("is-closed"),this.element.classList.add("is-open")})},this.closeDropDown=()=>{window.removeEventListener("keyup",this.allowEscClose),window.removeEventListener("click",this.blurSubMenu),this.removeLinksBlurListeners(),requestAnimationFrame(()=>{this.element.classList.add("is-closed"),this.element.classList.remove("is-open")})},this.allowEscClose=e=>{e.keyCode===27&&this.closeDropDown()}}connect(){this.element.addEventListener(i.util.ez_drop_down.close_drop_down,this.closeDropDown)}disconnect(){this.element.removeEventListener(i.util.ez_drop_down.close_drop_down,this.closeDropDown)}handleSubMenuClick(){this.element.classList.contains("is-open")?this.closeDropDown():this.openDropDown()}closeExploreMenuItems(){a("CloseSearchExploreSubMenus")}addLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(s=>{this.closeSubMenuOnClick()&&s.addEventListener("click",this.closeDropDown)})}removeLinksBlurListeners(){const e=this.element.querySelectorAll(".ez-drop-down__submenu-item a");e==null||e.forEach(s=>{s.removeEventListener("click",this.closeDropDown)})}closeSubMenuOnClick(){return this.hasCloseOnLinkClickValue?this.closeOnLinkClickValue:!0}}r.values={closeOnLinkClick:Boolean};class o extends t{connect(){this.flagLoaded()}on(){this.elementTargets.forEach(e=>{e.classList.add(...this.nameClasses)})}off(){this.elementTargets.forEach(e=>{e.classList.remove(...this.nameClasses)})}}o.classes=["name"];o.targets=["element"];l([["button",d],["ez-drop-down",r],["ez-form-select",c],["ez-modal",m],["toggle-class",o]]);
